---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Hello MLHO!

<!-- badges: start -->
<!-- badges: end -->

MLHO (pronounced as melo) is a thinkin' Machine Learning framework that implements iterative sequential representation mining, and feature and model selection to predict health outcomes.


## Installation

You can install the released version of mlho from [Github](https://https://github.com/hestiri/mlho) with:

``` r
devtools::install_github("hestiri/mlho")
```

## Data model

To implement MLHO you'll need 2 tables, which can be extracted from any clinical CMD. The current examples are based on the i2b2 star schema.

1-  a table with outcome labels (called `labeldt`) and patient numbers
```{r,echo=FALSE,warning=FALSE}
knitr::kable(
  rbind(c("patient_num","label"),
                   c("character","factor"))
)
```



2- a patient clinical data table (called `dbmart`) with 3 columns. Concepts are used as features by MLHO.



```{r,echo=FALSE,warning=FALSE}
knitr::kable(
  rbind(c("patient_num","start_date","phenx"),
                   c("character","date","character"))
)
```

The column `phenx` contains the entire feature space. In an `i2b2` data model, for instance, this column is the equivalent of `concept_cd`.

3- a demographic table is optional, but recommended.
```{r,echo=FALSE,warning=FALSE}
knitr::kable(
  rbind(c("patient_num","age","gender","..."),
                   c("character","character","character","character"))
)
```

you'll need to feed the column names of the demographics table (`dems` table) to the functions.


## MLHO Vanilla implementation

Here we go through the vanilla implementation of mlho using the synthetic data provided in the package.

The synthetic data `syntheticmass` downloaded and prepared according to mlho input data model from [SyntheticMass](https://synthea.mitre.org/downloads), generated by [SyntheaTM](https://synthetichealth.github.io/synthea/), an open-source patient population simulation made available by [The MITRE Corporation](https://health.mitre.org/).

```{r}
library(mlho)
data("syntheticmass")
```
here's how `dbmart` table looks:
```{r}
head(dbmart)
```
our demographic table contains: `r colnames(dems)`, which we store under `dems.names`:
```{r}
dems.names <- colnames(dems)
```


### MSMR lite
from here, we will split the data into a train and a test set and apply `MSMR.lite` to the training data
